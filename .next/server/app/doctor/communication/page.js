(()=>{var e={};e.id=891,e.ids=[891],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8634:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.Z,__next_app__:()=>x,originalPathname:()=>o,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(9097),t(5940),t(6083),t(6560);var r=t(3191),a=t(8716),i=t(8001),l=t(5231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(s,n);let c=["",{children:["doctor",{children:["communication",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9097)),"/Users/kaushaldabhi/new_website/app/doctor/communication/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5940)),"/Users/kaushaldabhi/new_website/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,6083)),"/Users/kaushaldabhi/new_website/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,6560)),"/Users/kaushaldabhi/new_website/app/not-found.tsx"]}],d=["/Users/kaushaldabhi/new_website/app/doctor/communication/page.tsx"],o="/doctor/communication/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/doctor/communication/page",pathname:"/doctor/communication",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1132:(e,s,t)=>{Promise.resolve().then(t.bind(t,9535))},9535:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(326),a=t(7577),i=t(5047),l=t(434);t(2945);var n=t(1021),c=t(3679),d=t(6333),o=t(8307),x=t(617),m=t(9635),u=t(2887),h=t(9758),p=t(5932),j=t(9436),g=t(2900),b=t(7553),f=t(725),v=t(6370);function N(){(0,i.useRouter)();let[e,s]=(0,a.useState)(null),[t,N]=(0,a.useState)([]),[y,w]=(0,a.useState)(null),[Z,k]=(0,a.useState)(""),[P,C]=(0,a.useState)(!0),[S,q]=(0,a.useState)(null),[_,M]=(0,a.useState)(""),R=async()=>{if(Z.trim()&&y)try{console.log("Sending message to",y.name,":",Z),N(e=>e.map(e=>e.id===y.id?{...e,lastMessage:Z,lastMessageTime:new Date().toISOString()}:e)),k("")}catch(e){console.error("Error sending message:",e)}},z=t.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())||e.email.toLowerCase().includes(_.toLowerCase()));return P?r.jsx(v.Z,{requiredRole:"doctor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(g.Z,{}),r.jsx(b.Z,{}),r.jsx("div",{className:"pt-32 pb-16",children:r.jsx("div",{className:"max-w-6xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Loading patient communications..."})]})})})]})}):r.jsx(v.Z,{requiredRole:"doctor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(g.Z,{}),r.jsx(b.Z,{}),r.jsx("div",{className:"pt-32 pb-16",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[S&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-400 text-red-700 rounded",children:(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Error:"})," ",S]})}),r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(l.default,{href:"/doctor/dashboard",children:r.jsx(c.Z,{variant:"ghost",icon:d.Z,children:"Back to Dashboard"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Patient Communication"}),r.jsx("p",{className:"text-gray-600",children:"Chat and communicate with your patients"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Doctor"}),(0,r.jsxs)("div",{className:"font-semibold text-slate-900",children:["Dr. ",e?.full_name]}),r.jsx("div",{className:"text-xs text-gray-500",children:e?.specialty})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Patients"}),r.jsx("div",{className:"text-sm text-gray-500",children:z.length})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search patients...",value:_,onChange:e=>M(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),r.jsx(n.eW,{className:"p-0",children:0===z.length?(0,r.jsxs)("div",{className:"p-6 text-center",children:[r.jsx(x.Z,{className:"w-8 h-8 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-gray-600",children:"No patients found"})]}):r.jsx("div",{className:"space-y-1",children:z.map(e=>r.jsx("div",{onClick:()=>w(e),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100 ${y?.id===e.id?"bg-blue-50 border-blue-200":""}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(m.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-slate-900 text-sm",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-32",children:e.lastMessage})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.lastMessageTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.unreadCount>0&&r.jsx("div",{className:"w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center mt-1",children:e.unreadCount})]})]})},e.id))})})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx(n.Zb,{className:"h-96",children:y?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(m.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:y.name}),r.jsx("p",{className:"text-sm text-gray-500",children:y.email})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(c.Z,{variant:"ghost",size:"sm",icon:u.Z,children:"Call"}),r.jsx(c.Z,{variant:"ghost",size:"sm",icon:h.Z,children:"Video"}),r.jsx(c.Z,{variant:"ghost",size:"sm",icon:p.Z,children:"Email"})]})]})}),(0,r.jsxs)(n.eW,{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 rounded-lg mb-4",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:[r.jsx(x.Z,{className:"w-8 h-8 mx-auto mb-2"}),(0,r.jsxs)("p",{children:["Start a conversation with ",y.name]})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:Z,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&R(),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx(c.Z,{onClick:R,disabled:!Z.trim(),icon:j.Z,children:"Send"})]})]})]}):r.jsx(n.eW,{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(x.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Select a Patient"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Choose a patient from the list to start messaging"})]})})})})]})]})}),r.jsx(f.default,{})]})})}},6370:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var r=t(326),a=t(7577),i=t(5047);t(2945);var l=t(2900),n=t(7553);function c({children:e,requiredRole:s,fallbackUrl:t="/start-case"}){let c=(0,i.useRouter)(),[d,o]=(0,a.useState)(!0),[x,m]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1);return d||!u?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(l.Z,{}),r.jsx(n.Z,{}),r.jsx("div",{className:"pt-32 pb-16",children:r.jsx("div",{className:"max-w-6xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Checking authentication..."})]})})})]}):x?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(l.Z,{}),r.jsx(n.Z,{}),r.jsx("div",{className:"pt-32 pb-16",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"patient"===s?"Patient Portal Access":"doctor"===s?"Doctor Portal Access":"Portal Access"}),r.jsx("p",{className:"text-lg text-gray-600 mb-8",children:x}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("button",{onClick:()=>c.push("/start-case"),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In / Register"]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>c.push("/"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"← Back to Homepage"})})]})]})})})]}):r.jsx(r.Fragment,{children:e})}},3679:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var r=t(326),a=t(7577),i=t.n(a),l=t(7863);let n=i().forwardRef(({variant:e="primary",size:s="md",icon:t,iconPosition:a="left",loading:i=!1,className:n,children:c,disabled:d,...o},x)=>{let m=(0,l.cn)("btn inline-flex items-center justify-center gap-2 font-medium transition-all duration-200 focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",outline:"btn-outline",link:"btn-link"}[e],{sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"}[s],n);return(0,r.jsxs)("button",{ref:x,className:m,disabled:d||i,...o,children:[i&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"}),t&&"left"===a&&!i&&r.jsx(t,{className:"h-4 w-4"}),c,t&&"right"===a&&!i&&r.jsx(t,{className:"h-4 w-4"})]})});n.displayName="Button";let c=n},1021:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>c,Zb:()=>n,eW:()=>d});var r=t(326),a=t(7577),i=t.n(a),l=t(7863);let n=i().forwardRef(({variant:e="default",padding:s="md",className:t,children:a,...i},n)=>{let c=(0,l.cn)("card",{default:"bg-surface border-border",elevated:"bg-surface border-transparent shadow-lg",outlined:"bg-transparent border-border"}[e],{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s],t);return r.jsx("div",{ref:n,className:c,...i,children:a})}),c=i().forwardRef(({className:e,children:s,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("card-header",e),...t,children:s})),d=i().forwardRef(({className:e,children:s,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("card-body",e),...t,children:s})),o=i().forwardRef(({className:e,children:s,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("card-footer",e),...t,children:s}));n.displayName="Card",c.displayName="CardHeader",d.displayName="CardBody",o.displayName="CardFooter"},2945:(e,s,t)=>{"use strict";t.d(s,{e:()=>a});var r=t(9557);let a=()=>(0,r.createBrowserClient)("https://eqjpdytmsohfpohecczz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxanBkeXRtc29oZnBvaGVjY3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzM1NzcsImV4cCI6MjA3NDQwOTU3N30.DDNR98O9E1rcWirNZPOuoSYjaUDSuReNcZQbZtxTjgQ")},7863:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(1135),a=t(1009);function i(...e){return(0,a.m6)((0,r.W)(e))}},6333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},617:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},8307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9436:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},9635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9758:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},9097:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/kaushaldabhi/new_website/app/doctor/communication/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,672,25,325,557,749,725,920],()=>t(8634));module.exports=r})();