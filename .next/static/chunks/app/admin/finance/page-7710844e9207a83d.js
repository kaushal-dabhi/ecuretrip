(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{674:function(e,t,s){Promise.resolve().then(s.bind(s,6114))},6114:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),n=s(2265),l=s(970),r=s(9178),i=s(4226),c=s(1723),d=s(5302),x=s(2252),o=s(2660),m=s(5252),h=s(525),u=s(8736);let f=(0,s(9763).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var j=s(4284),y=s(1344),p=s(8349);function g(){let[e,t]=(0,n.useState)([]),[s,g]=(0,n.useState)(!0),[b,N]=(0,n.useState)(null),[v,w]=(0,n.useState)({totalRevenue:0,totalProfit:0,pendingPayments:0,completedPayments:0});async function Z(){try{let e=(0,l.e)(),{data:s,error:a}=await e.from("finance_notes").select("\n          *,\n          case:cases(id, patient_id, treatment_id, status, patient_notes, treatment:treatments(id, name)),\n          quote:quotes(id, total, currency)\n        ").order("created_at",{ascending:!1});if(a)throw a;t(s||[]);let n=(null==s?void 0:s.reduce((e,t)=>e+(t.x_amount||0),0))||0,r=(null==s?void 0:s.reduce((e,t)=>e+(t.z_profit||0),0))||0,i=(null==s?void 0:s.filter(e=>"pending"===e.status).length)||0,c=(null==s?void 0:s.filter(e=>"completed"===e.status).length)||0;w({totalRevenue:n,totalProfit:r,pendingPayments:i,completedPayments:c})}catch(e){N("Failed to load finance data"),console.error("Error fetching finance notes:",e)}finally{g(!1)}}(0,n.useEffect)(()=>{Z()},[]);let k=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"pending":default:return(0,a.jsx)(c.Z,{className:"w-4 h-4"});case"completed":return(0,a.jsx)(d.Z,{className:"w-4 h-4"});case"refunded":return(0,a.jsx)(x.Z,{className:"w-4 h-4"})}};return s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(j.Z,{}),(0,a.jsx)(y.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading finance data..."})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(j.Z,{}),(0,a.jsx)(y.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(i.Z,{variant:"ghost",icon:o.Z,children:"Back to Admin"})}),b&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-red-800 text-sm",children:b})]}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Finance Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track revenue, profits, and payment status"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.eW,{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:["₹",v.totalRevenue.toLocaleString()]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.eW,{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(h.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:["₹",v.totalProfit.toLocaleString()]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Profit"})]})}),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.eW,{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:v.pendingPayments}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Payments"})]})}),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.eW,{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:v.completedPayments}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"Financial Records"]})}),(0,a.jsx)(r.eW,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Financial Records"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No finance notes have been created yet."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Case"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Treatment"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",children:"X Amount"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",children:"A Fee"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",children:"Y Transfer"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",children:"Z Profit"}),(0,a.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Created"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.case_id.slice(-8)]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(null===(s=e.case)||void 0===s?void 0:null===(t=s.treatment)||void 0===t?void 0:t.name)||"Unknown"})}),(0,a.jsx)("td",{className:"py-3 px-4 text-right",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["₹",e.x_amount.toLocaleString()]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-right",children:(0,a.jsxs)("div",{className:"text-sm text-blue-600",children:["₹",(e.a_fee||0).toLocaleString()]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-right",children:(0,a.jsxs)("div",{className:"text-sm text-green-600",children:["₹",(e.y_transfer||0).toLocaleString()]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-right",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-green-600",children:["₹",(e.z_profit||0).toLocaleString()]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-center",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(k(e.status)),children:[S(e.status),e.status]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})})]},e.id)})})]})})})]}),e.length>0&&(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Revenue Breakdown"})}),(0,a.jsx)(r.eW,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Revenue (X):"}),(0,a.jsxs)("span",{className:"font-semibold",children:["₹",v.totalRevenue.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"Platform Fees (A):"}),(0,a.jsxs)("span",{className:"font-semibold text-blue-600",children:["₹",v.totalProfit.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-600",children:"Doctor Transfers (Y):"}),(0,a.jsxs)("span",{className:"font-semibold text-green-600",children:["₹",(v.totalRevenue-v.totalProfit).toLocaleString()]})]})]})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Payment Status"})}),(0,a.jsx)(r.eW,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-yellow-600",children:"Pending:"}),(0,a.jsx)("span",{className:"font-semibold",children:v.pendingPayments})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-600",children:"Completed:"}),(0,a.jsx)("span",{className:"font-semibold",children:v.completedPayments})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Transactions:"}),(0,a.jsx)("span",{className:"font-semibold",children:e.length})]})]})})]})]})]})}),(0,a.jsx)(p.default,{})]})}},4226:function(e,t,s){"use strict";var a=s(7437),n=s(2265),l=s(4508);let r=n.forwardRef((e,t)=>{let{variant:s="primary",size:n="md",icon:r,iconPosition:i="left",loading:c=!1,className:d,children:x,disabled:o,...m}=e,h=(0,l.cn)("btn inline-flex items-center justify-center gap-2 font-medium transition-all duration-200 focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",outline:"btn-outline",link:"btn-link"}[s],{sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"}[n],d);return(0,a.jsxs)("button",{ref:t,className:h,disabled:o||c,...m,children:[c&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"}),r&&"left"===i&&!c&&(0,a.jsx)(r,{className:"h-4 w-4"}),x,r&&"right"===i&&!c&&(0,a.jsx)(r,{className:"h-4 w-4"})]})});r.displayName="Button",t.Z=r},9178:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},Zb:function(){return r},eW:function(){return c}});var a=s(7437),n=s(2265),l=s(4508);let r=n.forwardRef((e,t)=>{let{variant:s="default",padding:n="md",className:r,children:i,...c}=e,d=(0,l.cn)("card",{default:"bg-surface border-border",elevated:"bg-surface border-transparent shadow-lg",outlined:"bg-transparent border-border"}[s],{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],r);return(0,a.jsx)("div",{ref:t,className:d,...c,children:i})}),i=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("card-header",s),...r,children:n})}),c=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("card-body",s),...r,children:n})}),d=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("card-footer",s),...r,children:n})});r.displayName="Card",i.displayName="CardHeader",c.displayName="CardBody",d.displayName="CardFooter"},970:function(e,t,s){"use strict";s.d(t,{e:function(){return n}});var a=s(6188);let n=()=>(0,a.createBrowserClient)("https://eqjpdytmsohfpohecczz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxanBkeXRtc29oZnBvaGVjY3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzM1NzcsImV4cCI6MjA3NDQwOTU3N30.DDNR98O9E1rcWirNZPOuoSYjaUDSuReNcZQbZtxTjgQ")},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(1994),n=s(3335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},function(e){e.O(0,[972,862,137,188,349,422,971,117,744],function(){return e(e.s=674)}),_N_E=e.O()}]);