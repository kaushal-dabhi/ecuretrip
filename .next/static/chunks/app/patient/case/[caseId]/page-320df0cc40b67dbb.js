(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{255:function(e,s,t){Promise.resolve().then(t.bind(t,8726))},8726:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var a=t(7437),r=t(2265),n=t(9376),l=t(7648),c=t(970),i=t(9178),d=t(4226),x=t(1723),o=t(3417),u=t(5302),m=t(2252),h=t(2660),f=t(1047),j=t(8736),p=t(5252),y=t(7689),N=t(2735),b=t(2208),g=t(4284),w=t(1344),v=t(8349);function Z(){let e=(0,n.useParams)().caseId,[s,t]=(0,r.useState)(null),[Z,k]=(0,r.useState)([]),[_,z]=(0,r.useState)([]),[M,S]=(0,r.useState)(!0),[I,C]=(0,r.useState)(null);async function D(){try{let s=(0,c.e)(),{data:a,error:r}=await s.from("cases").select("\n          *,\n          treatment:treatments(id, name, description, base_price, currency)\n        ").eq("id",e).single();if(r)throw r;let{data:n,error:l}=await s.from("case_files").select("*").eq("case_id",e).order("created_at",{ascending:!1});if(l)throw l;let{data:i,error:d}=await s.from("quotes").select("*").eq("case_id",e).order("created_at",{ascending:!1});if(d)throw d;t(a),k(n||[]),z(i||[])}catch(e){C(e.message||"Failed to load case details"),console.error("Error fetching case details:",e)}finally{S(!1)}}(0,r.useEffect)(()=>{e&&D()},[e]);let B=e=>{if(!e)return"Unknown size";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]};return M?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)(w.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading case details..."})]})})})]}):I||!s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)(w.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Case Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:I||"The requested case could not be found."}),(0,a.jsx)(l.default,{href:"/patient/dashboard",children:(0,a.jsx)(d.Z,{children:"Back to Dashboard"})})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)(w.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(l.default,{href:"/patient/dashboard",children:(0,a.jsx)(d.Z,{variant:"ghost",icon:h.Z,children:"Back to Dashboard"})})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-slate-900",children:["Case #",s.id.slice(-8)]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"new":return"bg-blue-100 text-blue-800";case"quoted":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(s.status)),children:[(e=>{switch(e){case"new":default:return(0,a.jsx)(x.Z,{className:"w-4 h-4"});case"quoted":return(0,a.jsx)(o.Z,{className:"w-4 h-4"});case"accepted":return(0,a.jsx)(u.Z,{className:"w-4 h-4"});case"closed":return(0,a.jsx)(m.Z,{className:"w-4 h-4"})}})(s.status),s.status]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"Created ",new Date(s.created_at).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Updated ",new Date(s.updated_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[s.treatment&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),"Treatment Information"]})}),(0,a.jsx)(i.eW,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 mb-1",children:s.treatment.name}),(0,a.jsx)("p",{className:"text-gray-600",children:s.treatment.description})]}),s.treatment.base_price&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:[s.treatment.currency," ",s.treatment.base_price.toLocaleString()]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"(Base Price)"})]})]})})]}),s.patient_notes&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Your Notes"]})}),(0,a.jsx)(i.eW,{children:(0,a.jsx)("p",{className:"text-gray-700",children:s.patient_notes})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5"}),"Medical Files (",Z.length,")"]}),(0,a.jsx)(l.default,{href:"/patient/case/".concat(e,"/uploads"),children:(0,a.jsxs)(d.Z,{size:"sm",variant:"outline",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Upload Files"]})})]})}),(0,a.jsx)(i.eW,{children:0===Z.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(j.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No files uploaded yet"}),(0,a.jsx)(l.default,{href:"/patient/case/".concat(e,"/uploads"),children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Upload Your First File"]})})]}):(0,a.jsx)("div",{className:"space-y-3",children:Z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:e.path.split("/").pop()}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[B(e.size_bytes)," â€¢ ",e.mime_type]})]})]}),(0,a.jsxs)(d.Z,{size:"sm",variant:"outline",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Download"]})]},e.id))})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[_.length>0&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),"Quotes (",_.length,")"]})}),(0,a.jsxs)(i.eW,{children:[(0,a.jsx)("div",{className:"space-y-3",children:_.map(e=>{var s;return(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:[e.currency," ",null===(s=e.total)||void 0===s?void 0:s.toLocaleString()]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("sent"===e.status?"bg-blue-100 text-blue-800":"accepted"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id)})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(l.default,{href:"/patient/quotes",children:(0,a.jsxs)(d.Z,{className:"w-full",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"View All Quotes"]})})})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Quick Actions"})}),(0,a.jsx)(i.eW,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(l.default,{href:"/patient/case/".concat(e,"/uploads"),children:(0,a.jsxs)(d.Z,{className:"w-full",variant:"outline",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Upload Files"]})}),_.length>0&&(0,a.jsx)(l.default,{href:"/patient/quotes",children:(0,a.jsxs)(d.Z,{className:"w-full",variant:"outline",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"View Quotes"]})}),(0,a.jsx)(l.default,{href:"/patient/dashboard",children:(0,a.jsxs)(d.Z,{className:"w-full",variant:"outline",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})})]})})]})]})]})]})}),(0,a.jsx)(v.default,{})]})}},4226:function(e,s,t){"use strict";var a=t(7437),r=t(2265),n=t(4508);let l=r.forwardRef((e,s)=>{let{variant:t="primary",size:r="md",icon:l,iconPosition:c="left",loading:i=!1,className:d,children:x,disabled:o,...u}=e,m=(0,n.cn)("btn inline-flex items-center justify-center gap-2 font-medium transition-all duration-200 focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",outline:"btn-outline",link:"btn-link"}[t],{sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"}[r],d);return(0,a.jsxs)("button",{ref:s,className:m,disabled:o||i,...u,children:[i&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"}),l&&"left"===c&&!i&&(0,a.jsx)(l,{className:"h-4 w-4"}),x,l&&"right"===c&&!i&&(0,a.jsx)(l,{className:"h-4 w-4"})]})});l.displayName="Button",s.Z=l},9178:function(e,s,t){"use strict";t.d(s,{Ol:function(){return c},Zb:function(){return l},eW:function(){return i}});var a=t(7437),r=t(2265),n=t(4508);let l=r.forwardRef((e,s)=>{let{variant:t="default",padding:r="md",className:l,children:c,...i}=e,d=(0,n.cn)("card",{default:"bg-surface border-border",elevated:"bg-surface border-transparent shadow-lg",outlined:"bg-transparent border-border"}[t],{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[r],l);return(0,a.jsx)("div",{ref:s,className:d,...i,children:c})}),c=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("card-header",t),...l,children:r})}),i=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("card-body",t),...l,children:r})}),d=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("card-footer",t),...l,children:r})});l.displayName="Card",c.displayName="CardHeader",i.displayName="CardBody",d.displayName="CardFooter"},970:function(e,s,t){"use strict";t.d(s,{e:function(){return r}});var a=t(6188);let r=()=>(0,a.createBrowserClient)("https://eqjpdytmsohfpohecczz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxanBkeXRtc29oZnBvaGVjY3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzM1NzcsImV4cCI6MjA3NDQwOTU3N30.DDNR98O9E1rcWirNZPOuoSYjaUDSuReNcZQbZtxTjgQ")},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}},2252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2735:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2208:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},3417:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},7689:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[972,862,137,188,349,422,971,117,744],function(){return e(e.s=255)}),_N_E=e.O()}]);