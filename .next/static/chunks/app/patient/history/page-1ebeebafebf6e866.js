(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[905],{9840:function(e,s,t){Promise.resolve().then(t.bind(t,7764))},7764:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var a=t(7437),r=t(2265),l=t(9376),n=t(7648),i=t(970),c=t(9178),d=t(4226),x=t(5337),o=t(8736),m=t(4159),h=t(8997),u=t(2208),j=t(2660),p=t(1047),f=t(2369),N=t(2735),g=t(9374),b=t(1723),y=t(4284),v=t(1344),w=t(8349),Z=t(2690);function _(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[_,k]=(0,r.useState)([]),[E,S]=(0,r.useState)([]),[R,z]=(0,r.useState)(!0),[C,D]=(0,r.useState)(null);async function q(){try{let s=(0,i.e)(),{data:{user:a},error:r}=await s.auth.getUser();if(r||!a){e.push("/start-case");return}let{data:l,error:n}=await s.from("profiles").select("*").eq("id",a.id).single();if(n){e.push("/start-case");return}t(l);let{data:c,error:d}=await s.from("medical_records").select("*").eq("patient_id",a.id).order("created_at",{ascending:!1});d?console.error("Error fetching medical records:",d):k(c||[]);let{data:x,error:o}=await s.from("appointments").select("*").eq("patient_id",a.id).order("appointment_date",{ascending:!1});o?console.error("Error fetching appointments:",o):S(x||[])}catch(e){console.error("Error fetching patient data:",e),D("Failed to load patient data")}finally{z(!1)}}(0,r.useEffect)(()=>{q()},[]);let L=e=>{switch(e){case"Consultation":return(0,a.jsx)(x.Z,{className:"w-5 h-5"});case"Lab Results":default:return(0,a.jsx)(o.Z,{className:"w-5 h-5"});case"Prescription":return(0,a.jsx)(m.Z,{className:"w-5 h-5"});case"Vital Signs":return(0,a.jsx)(h.Z,{className:"w-5 h-5"});case"Imaging":return(0,a.jsx)(u.Z,{className:"w-5 h-5"})}},M=e=>{switch(e){case"completed":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return R?(0,a.jsx)(Z.Z,{requiredRole:"patient",children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(y.Z,{}),(0,a.jsx)(v.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading your medical history..."})]})})})]})}):(0,a.jsx)(Z.Z,{requiredRole:"patient",children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(y.Z,{}),(0,a.jsx)(v.Z,{}),(0,a.jsx)("div",{className:"pt-32 pb-16",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[C&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-400 text-red-700 rounded",children:(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Error:"})," ",C]})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.default,{href:"/patient/dashboard",children:(0,a.jsx)(d.Z,{variant:"ghost",icon:j.Z,children:"Back to Dashboard"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Medical History"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Complete overview of your medical records and consultations"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Patient"}),(0,a.jsx)("div",{className:"font-semibold text-slate-900",children:null==s?void 0:s.full_name})]})]})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Medical Records"})}),(0,a.jsx)(c.eW,{children:0===_.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"No Medical Records"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Your medical records will appear here once you start consultations"}),(0,a.jsx)(n.default,{href:"/start-case",children:(0,a.jsx)(d.Z,{size:"sm",icon:o.Z,children:"Upload Records"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:_.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:L(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.notes}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),e.doctor]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(M(e.status)),children:e.status}),(0,a.jsx)(d.Z,{variant:"ghost",size:"sm",icon:N.Z,children:"Download"})]})]})},e.id))})})]})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Appointment History"})}),(0,a.jsx)(c.eW,{children:0===E.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(p.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"No Appointments"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Your appointment history will appear here"}),(0,a.jsx)(n.default,{href:"/appointments",children:(0,a.jsx)(d.Z,{size:"sm",icon:p.Z,children:"Book Appointment"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:E.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:"video"===e.type?(0,a.jsx)(g.Z,{className:"w-5 h-5"}):(0,a.jsx)(x.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:"video"===e.type?"Video Consultation":"In-Person Consultation"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.notes}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),e.time]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),e.doctor]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(M(e.status)),children:e.status})})]})},e.id))})})]})})]})}),(0,a.jsx)(w.default,{})]})})}},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2208:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[972,862,137,188,349,422,741,971,117,744],function(){return e(e.s=9840)}),_N_E=e.O()}]);